<!DOCTYPE html>
{% load staticfiles %}
<html>
    <head>
        <title>find a lift</title>
        <link rel="stylesheet" href="{% static "styles/style-find-lift.css" %}" />
    </head>
    
    <body>
        <div class="p">
            <div class="header">
                <div class="container">
                    <h1><a href='/szchober/'>Szch<span style="color: green">รถ</span>ber</a></h1>
                </div>
            </div>
            </div>
    <div class="body">
    <div class="mapcontainer">
    <div id="map"></div>
    <script>
      function initMap() {
        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 17,
          center:  {lat: 55.8721, lng: -4.2882},
          mapTypeControl: false,
          mapTypeControlOptions: {
              style: google.maps.MapTypeControlStyle.HORIZONTAL_BAR,
              position: google.maps.ControlPosition.TOP_CENTER
          },
          zoomControl: false,
          zoomControlOptions: {
              position: google.maps.ControlPosition.LEFT_CENTER
          },
          scaleControl: false,
          streetViewControl: false,
          streetViewControlOptions: {
              position: google.maps.ControlPosition.LEFT_TOP
          },
          fullscreenControl: false
        });
        var geocoder = new google.maps.Geocoder();
        document.getElementById('ConfirmLocation').addEventListener('click', function() {
          geocodeAddress(geocoder, map);
        });

        infoWindow = new google.maps.InfoWindow;
        
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(function(position) {
            var pos = {
              lat: position.coords.latitude,
              lng: position.coords.longitude
            };

        infoWindow.setPosition(pos);
        infoWindow.setContent('Your approximate location.');
        infoWindow.open(map);
        map.setCenter(pos);
      }, function() {
        handleLocationError(true, infoWindow, map.getCenter());
        });
      } else {
        handleLocationError(false, infoWindow, map.getCenter());
      }
      }

      function geocodeAddress(geocoder, resultsMap) {
        var address = document.getElementById('location').value;
        geocoder.geocode({'address': address}, function(results, status) {
          if (status === 'OK') {
            resultsMap.setCenter(results[0].geometry.location);
            var marker = new google.maps.Marker({
              map: resultsMap,
              position: results[0].geometry.location,
            });
          } else {
            alert('Geocode was not successful for the following reason: ' + status);
          }
        });
      }

      function handleLocationError(browserHasGeolocation, infoWindow, pos) {
        infoWindow.setPosition(pos);
        infoWindow.setContent(browserHasGeolocation ?
                              'Error: The Geolocation service failed.' :
                              'Error: Your browser doesn\'t support geolocation.');
        infoWindow.open(map);
      }
    </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDAyB5pYSYqOo5T0ih5jDjKJJpsNR_LVO8&callback=initMap">
    </script>
    </div>

    <div class="container-supermarket-info">
        <h2>Find a lift.</h2>
        <form>
            <input type="text" id="location" name="location" placeholder="Enter destination location and postcode">
        </form>
        <button type="button" id="ConfirmLocation">Confirm Location</button>
    </div>

    <div class="container-available-drivers">
        <h3>Available Drivers.</h3>
        <button onclick="bookNowButton()" type="button" id="booknow">Book now</button>

        <script>
          function bookNowButton(){
            alert("Your selected driver has been alerted and is on their way");
          }
        </script>

    </div>
</div>
    </body>
</html>